    {% include 'header.html' %}

    <div class="container my-registrations-page">
        <h2>–ú–æ–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h2>

        <!-- –ë–ª–æ–∫ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π Django -->
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% if registrations %}
            <div class="registrations-list">
                <ul>
                    {% for reg in registrations %}
                    <li class="registration-item">
                        <a href="{% url 'tours:tour_detail' tour_id=reg.tour.id %}" class="tour-link">
                            {{ reg.tour.name }}
                        </a>
                        ‚Äî {{ reg.tour.start_date }} ‚Äî {{ reg.tour.end_date|default:"–ë–µ—Å—Å—Ä–æ—á–Ω–æ" }}
                    
                        {% if reg.status == 'cancelled' %}
                            <span class="status status-cancelled">–°–¢–ê–¢–£–°: –û–¢–ú–ï–ù–Å–ù</span>
                            <form method="post" action="{% url 'tours_registrations:reactivate_registration' reg.id %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-success">
                                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞
                                </button>
                            </form>
                        {% elif reg.status == 'pending' %}
                            <span class="status status-pending">–°–¢–ê–¢–£–°: –û–ñ–ò–î–ê–ï–¢</span>
                            <form method="post" action="{% url 'tours_registrations:cancel_registration' reg.id %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-danger"
                                        onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?')">
                                    –û—Ç–º–µ–Ω–∏—Ç—å
                                </button>
                            </form>
                        {% elif reg.status == 'confirmed' %}
                            <span class="status status-confirmed">–°–¢–ê–¢–£–°: –ü–û–î–¢–í–ï–†–ñ–î–Å–ù</span>
                            <form method="post" action="{% url 'tours_registrations:cancel_registration' reg.id %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-danger"
                                        onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?')">
                                    –û—Ç–º–µ–Ω–∏—Ç—å
                                </button>
                            </form>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% else %}
            <div class="no-registrations">
                <p>–í—ã –ø–æ–∫–∞ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –º–∞—Ä—à—Ä—É—Ç.</p>
                <a href="{% url 'tours:tour_list' %}" class="btn btn-primary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</a>
            </div>
        {% endif %}

        <p><a href="{% url 'account:profile' %}">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å</a></p>
    </div>

    <style>
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* üü° –û–∂–∏–¥–∞–µ—Ç ‚Üí –∂—ë–ª—Ç—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π */
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        /* üü¢ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω ‚Üí –∑–µ–ª—ë–Ω—ã–π */
        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        /* üî¥ –û—Ç–º–µ–Ω—ë–Ω ‚Üí –∫—Ä–∞—Å–Ω—ã–π */
        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .btn-outline-success {
            color: #28a745;
            border: 1px solid #28a745;
            background: transparent;
        }
        
        .btn-outline-success:hover {
            background-color: #28a745;
            color: white;
        }

        .registration-item {
            background: #f8f9fa;
            padding: 12px 16px;
            margin-bottom: 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .tour-link {
            font-weight: 600;
            color: #007bff;
            text-decoration: none;
            min-width: 200px;
        }
        
        .tour-link:hover {
            text-decoration: underline;
        }
        
        .dates {
            color: #555;
            font-size: 0.9em;
        }
        
        .status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .btn {
            padding: 6px 12px;
            font-size: 0.85em;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-outline-success {
            color: #28a745;
            border: 1px solid #28a745;
            background: transparent;
        }
        
        .btn-outline-success:hover {
            background-color: #28a745;
            color: white;
        }
        
        .btn-outline-danger {
            color: #dc3545;
            border: 1px solid #dc3545;
            background: transparent;
        }
        
        .btn-outline-danger:hover {
            background-color: #dc3545;
            color: white;
        }

        .status:hover {
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
            transform: scale(1.05);
            transition: all 0.2s;
        }
    </style>